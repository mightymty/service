<!DOCTYPE html>
<html class="no-js" lang="">
<head>
  <meta charset="utf-8" />
  <title></title>
  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="stylesheet" href="css/main.css" />
  <link rel="stylesheet" href="css/form.css" />

  <meta name="theme-color" content="#fafafa" />
</head>

<body class="form-body">
  <div class="form-wrapper">
    <a href="/">Hem</a>
    <div class="input-wrapper">
      <img class="logo" src="/img/logo.png" />
      <form id="machineForm" action="/save" method="POST">
        <h1>Paternoster IPN</h1>
        <section id="info">
          <h3>Maskin information</h3>

          <input type="hidden" id="machine_type" name="machine_type" value="Paternoster-IPN">

          <label for="date">Datum:</label>
          <input type="date" id="date" name="date" /><br /><br />

          <label for="client">Kund:</label>
          <input type="text" id="client" name="client" /><br /><br />

          <label for="location">Stad:</label>
          <input type="text" id="location" name="location" /><br /><br />

          <label for="model">Modell:</label>
          <select id="model" name="model">
            <option value="IPN 150">IPN 150</option>
            <option value="IPN 200">IPN 200</option>
            <option value="713">713</option>
            <option value="Ombyggd AST">Ombyggd AST</option>
          </select>
          <br /><br />

          <label for="nbr-of-starts">Antal Starter:</label>
          <input type="number" id="nbr_of_starts" name="nbr_of_starts" /><br /><br />

          <label for="unit-nbr">Maskin nr:</label>
          <input type="text" id="unit_nbr" name="unit_nbr" /><br /><br />

          <div>Underhåll:</div>
          <label for="preventive">Förebyggande</label>
          <input type="radio" id="preventive" name="maintenance" value="preventive" />
          <label for="acute">Akut</label>
          <input type="radio" id="acute" name="maintenance" value="acute" /><br /><br />

          <div>Besiktning:</div>
          <label for="takeover">Övertagande</label>
          <input type="radio" id="takeover" name="inspection" value="takeover" />
          <label for="check">Kontroll</label>
          <input type="radio" id="check" name="inspection" value="check" /><br /><br />

          <label for="comment">Övrigt:</label><br />
          <textarea class="text-area" name="comment" id="comment" cols="50" rows="5"></textarea><br /><br />

        </section>
        <section id="kap-2">
          <details>
            <summary>
              <span>Visuell inspektion / Kontroll (Kapitel 2)</span>
            </summary>

            <div class="chapter-row">
              <label>Beklädnad, arbetsöppning samt dörr:</label>
              <select id="2.0" name="coating_doors">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Inspektion undermaskin / öppning:</label>
              <select id="2.1" name="under_opening">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Kabeldragning inne i maskinen:</label>
              <select id="2.2" name="cabels_inside">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Bas- och mellanhyllplan:</label>
              <select id="2.3" name="carriers_levels">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Manöverpanel och display:</label>
              <select id="2.4" name="display">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Osymetrisk last och rörelseriktning:</label>
              <select id="2.5" name="load_direction">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <textarea name="comments_2" id="comments_2" cols="50" rows="5"></textarea>
            </div>

          </details>
        </section>
        <section id="kap-3">
          <details>
            <summary>
              <span>Kontroll och justeringar (Kapitel 3)</span>
            </summary>

            <div class="chapter-row">
              <label>Huvudkedja:</label>
              <select id="3.0" name="mainchain">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Kedjehjul och torque enhet:</label>
              <select id="3.1" name="chain_torque">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Lager och nedre drivaxel:</label>
              <select id="3.2" name="bearing">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Drivkedja och drev:</label>
              <select id="3.3" name="drivechain">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Drivenhet:</label>
              <select id="3.4" name="driveunit">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Upphängning av hyllplan / styrhjul:</label>
              <select id="3.5" name="carrier_support">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Hyllplansposition / lutning:</label>
              <select id="3.6" name="carrier_inclanation">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Styrgejder och vändkurvor:</label>
              <select id="3.7" name="guide_curves">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Dörr mekanism:</label>
              <select id="3.8" name="door">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <textarea name="comments_3" id="comments_3" cols="50" rows="5"></textarea>
            </div>

          </details>
        </section>

        <section id="kap-4">
          <details>
            <summary>
              <span>Smörjning (Kapitel 4)</span>
            </summary>

            <div class="chapter-row">
              <label>Drivenhet och kedjor:</label>
              <select id="4.0" name="main_chain">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Upphängningsarmar och styrhjul:</label>
              <select id="4.1" name="bottom_bearing">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Drivenhet och kedjor:</label>
              <select id="4.2" name="drive_chain">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Gejder och vändkurvor:</label>
              <select id="4.3" name="guide_curves">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Dörr mekanism:</label>
              <select id="4.4" name="door_mechanism">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <textarea name="comments_4" id="comments_4" cols="50" rows="5"></textarea>
            </div>

          </details>
        </section>

        <section id="kap-5">
          <details>
            <summary>
              <span>Funktioner (Kapitel 5)</span>

            </summary>

            <div class="chapter-row">
              <label>Ljusridå för personskydd:</label>
              <select id="5.0" name="lightcurtain">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Fotoceller för godsskydd:</label>
              <select id="5.1" name="fotcellsgoods">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Nödstopp:</label>
              <select id="5.2" name="emergency">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Batteri och Backup:</label>
              <select id="5.3" name="battery">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Arbetsbelysning:</label>
              <select id="5.4" name="light">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Manuel körning av dörr och hyllplan:</label>
              <select id="5.5" name="manualdrive">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <textarea name="comments_5" id="comments_5" cols="50" rows="5"></textarea>
            </div>

          </details>
        </section>

        <section id="kap-6">
          <details>
            <summary>
              <span>Testkörning (Kapitel 6)</span>
            </summary>

            <div class="chapter-row">
              <label>Smörjning hyllplan:</label>
              <select id="6.0" name="main_chain">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <textarea name="comments_6" id="comments_6" cols="50" rows="5"></textarea>
            </div>

          </details>
        </section>

        <section id="kap-7">
          <details>
            <summary>
              <span>Utbildningar (Kapitel 7)</span>
            </summary>

            <div class="chapter-row">
              <label>Styrsystem och funktioner:</label>
              <select id="7.0" name="edubasics">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Operatörskoder:</label>
              <select id="7.1" name="educodes">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Säkerhetsutrustning:</label>
              <select id="7.2" name="edusafety">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Lastning och vikter:</label>
              <select id="7.3" name="eduweights">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <label>Backup av databaser:</label>
              <select id="7.4" name="edubackup">
                <option value="ok">OK</option>
                <option value="fixed">Åtgärdat</option>
                <option value="noted">Bevakas</option>
                <option value="excluded">Excluderat</option>
              </select>
            </div>

            <div class="chapter-row">
              <textarea name="comments_7" id="comments_7" cols="50" rows="5"></textarea>
            </div>
          </details>
        </section>

        <input id="submit-button" type="submit" value="Submit" />
      </form>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const form = document.getElementById('machineForm');

        form.addEventListener('submit', function (event) {
          event.preventDefault();

          const formData = new FormData(event.target);
          //formData.forEach((value, key) => data[key] = value);

          const sections = document.querySelectorAll("section");

          let dataObject = { sections: [] };

          sections.forEach((section, index) => {
            const obj = {};
            const inputElements = section.querySelectorAll("input, select, checkbox, textarea");
            inputElements.forEach(element => obj[element.name] = element.value);

            if (index === 0) {
              dataObject = { ...obj, ...dataObject };
            } else {
              dataObject.sections.push(obj);
            }
          });

          console.log("data: ", dataObject);

          fetch('http://localhost:4000/save', {
            method: 'POST',
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(dataObject),
          })
            .then(response => {
              // Handle the response from the backend
              if (response.ok) {
                alert('successfully!');
                window.location
              } else {
                alert('Failed');
              }
            })
            .catch(error => {
              console.error('Error sending drawing data:', error);
            });
        });
      });
    </script>
</body>
</html>